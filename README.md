# Описание

Учебная задача перекачки данных из postgres в elasticsearch на etl

Posgtres связан с django. В django для моделей определено поле indexed, которое является флагом индексирования в elastic.
При сохранении модели флаг сбрасывается.

etl процесс получает все строки к индексированию, грузит их в elastic и проставляет флаг. 

# Инструкция к запуску:

## Билд

Заполнить .env файл по примеру из env.sample и запустить билд командой docker: 

    docker compose up --build

Здесь поднимутся все сервисы, etl скрипт подождет поднятия es,
а django выполнит миграции и создаст суперпользователя
  
## Тест

В джанго определена команда генерации тестовых данных, можем проверить на них загрузку в es.

Откройте список запущенных контейнеров.
    docker ps

Найдите container id с названием web и выполните:

    docker exec -it <django docker id> sh

Далее запустите генерацию данных:

    python manage.py generate_test_data

Curl запрос для проверки работы etl скрипта:
``` http://localhost:9200/movies/_search?pretty=true&q=*:* ```

В результате в поле hits будут перенесенные данные из django


